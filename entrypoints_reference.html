<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrypoints reference &mdash; pubtools-content-gateway 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Push Base Module" href="push_base.html" />
    <link rel="prev" title="Overview" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pubtools-content-gateway
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Entrypoints reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cgw-environment">CGW environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yaml-file-entities-formats">YAML file entities formats</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#product">Product</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version">Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file">File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#push-staged-cgw">push-staged-cgw</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yaml-file-formats">YAML file formats</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="push_base.html">Push Base Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="push_cgw.html">Push CGW Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="push_staged_cgw.html">Push Staged CGW Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="_content_gateway.html">Content Gateway package</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">ChangeLog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pubtools-content-gateway</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Entrypoints reference</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/release-engineering/pubtools-content-gateway/blob/main/docs/entrypoints_reference.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="entrypoints-reference">
<h1>Entrypoints reference<a class="headerlink" href="#entrypoints-reference" title="Permalink to this heading"></a></h1>
<p>Reference to entrypoints provided by pubtools content gateway (CGW). The entrypoints can be invoked by using a CLI, or programmatically with the provided master-level function.</p>
<div class="section" id="cgw-environment">
<h2>CGW environment<a class="headerlink" href="#cgw-environment" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">push</span><span class="o">-</span><span class="n">cgw</span><span class="o">-</span><span class="n">metadata</span>   <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="o">-</span><span class="n">host</span> <span class="n">CGW</span><span class="o">-</span><span class="n">hostname</span> <span class="o">-</span><span class="n">u</span> <span class="n">CGW</span><span class="o">-</span><span class="n">username</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">CGW</span><span class="o">-</span><span class="n">password</span><span class="p">]</span> <span class="o">-</span><span class="n">f</span> <span class="n">CGW</span><span class="o">-</span><span class="n">filepath</span>
                           <span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
                                <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>

                                <span class="o">-</span><span class="n">host</span> <span class="n">CGW</span><span class="o">-</span><span class="n">hostname</span><span class="p">,</span> <span class="o">--</span><span class="n">CGW_hostname</span> <span class="n">CGW</span><span class="o">-</span><span class="n">hostname</span>
                                                      <span class="n">Hostname</span> <span class="n">of</span> <span class="n">the</span> <span class="n">server</span>

                                <span class="o">-</span><span class="n">u</span> <span class="n">CGW</span><span class="o">-</span><span class="n">username</span><span class="p">,</span> <span class="o">--</span><span class="n">CGW_username</span> <span class="n">CGW</span><span class="o">-</span><span class="n">username</span>
                                                      <span class="n">Username</span> <span class="n">of</span> <span class="n">Content</span> <span class="n">Gateway</span>

                                <span class="o">-</span><span class="n">p</span> <span class="n">CGW</span><span class="o">-</span><span class="n">password</span><span class="p">,</span> <span class="o">--</span><span class="n">CGW_password</span> <span class="n">CGW</span><span class="o">-</span><span class="n">password</span>
                                                      <span class="n">Password</span> <span class="k">for</span> <span class="n">Content</span> <span class="n">Gateway</span>

                                <span class="o">-</span><span class="n">f</span> <span class="n">CGW</span><span class="o">-</span><span class="n">filepath</span><span class="p">,</span> <span class="o">--</span><span class="n">CGW_filepath</span> <span class="n">CGW</span><span class="o">-</span><span class="n">filepath</span>
                                                      <span class="n">File</span> <span class="n">path</span> <span class="n">to</span> <span class="n">read</span> <span class="n">metadata</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--host</span></code> or <code class="docutils literal notranslate"><span class="pre">--CGW_hostname</span></code></dt><dd><p>Hostname of the server</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-u</span></code> or <code class="docutils literal notranslate"><span class="pre">--CGW_username</span></code></dt><dd><p>Username of Content Gateway</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-P</span></code> or <code class="docutils literal notranslate"><span class="pre">--CGW_password</span></code></dt><dd><p>Password for Content Gateway</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-f</span></code> or <code class="docutils literal notranslate"><span class="pre">--CGW_filepath</span></code></dt><dd><p>File path to read metadata</p>
</dd>
</dl>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h3>
<p>A typical invocation to push a metadata would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">push</span><span class="o">-</span><span class="n">cgw</span><span class="o">-</span><span class="n">metadata</span> \
  <span class="o">--</span><span class="n">CGW_hostname</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">content</span><span class="o">-</span><span class="n">gateway</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> \
  <span class="o">--</span><span class="n">CGW_username</span> <span class="n">admin</span> \
  <span class="o">--</span><span class="n">CGW_password</span> <span class="n">XXXXX</span> \
  <span class="o">--</span><span class="n">CGW_filepath</span> <span class="n">docs</span><span class="o">/</span><span class="n">cgw</span><span class="o">/</span><span class="n">cgw_push</span><span class="o">.</span><span class="n">yaml</span>

<span class="ow">or</span>

<span class="n">push</span><span class="o">-</span><span class="n">cgw</span><span class="o">-</span><span class="n">metadata</span> <span class="o">-</span><span class="n">host</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">content</span><span class="o">-</span><span class="n">gateway</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> \
                  <span class="o">-</span><span class="n">p</span> <span class="n">XXXXX</span> \
                  <span class="o">-</span><span class="n">u</span> <span class="n">admin</span> \
                  <span class="o">-</span><span class="n">f</span> <span class="n">full_path_to_yaml_file</span><span class="o">/</span><span class="n">cgw_push</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</div>
<div class="section" id="yaml-file-entities-formats">
<span id="yaml-format"></span><h3>YAML file entities formats<a class="headerlink" href="#yaml-file-entities-formats" title="Permalink to this heading"></a></h3>
<p>One can Add, Update and Delete the contents from CGW.
The YAML file can consist list of Products, Versions and Files</p>
<div class="section" id="product">
<h4>Product<a class="headerlink" href="#product" title="Permalink to this heading"></a></h4>
<p>The highest in the hierarchy is a product. It contains significant details like <cite>name</cite>, <cite>code</cite>, <cite>downloadpage</cite> etc. (see below in YAML format)</p>
</div>
<div class="section" id="version">
<h4>Version<a class="headerlink" href="#version" title="Permalink to this heading"></a></h4>
<p>Each product can have multiple product versions. Product version groups files based on when they were released. Product version is identified by its name. The version name must be unique within the product scope, however there can be other product versions with the same name in a different product scope.</p>
<p>Besides a name the product version contains release date field, that is used in ordering product versions. If you set future date, the files will not appear in download tables until the release date.  It is also possible to add information whether the product version is the final version or early access.</p>
<p>If you mark the product version as “hidden”, all the files in the version will not be displayed and it will not be possible to download them. If the product version is marked as invisible, the files can be downloaded if someone knows the right URL, but the links will not appear in the download tables.</p>
</div>
<div class="section" id="file">
<h4>File<a class="headerlink" href="#file" title="Permalink to this heading"></a></h4>
<p>Each product version may contain one or more files. The file is identified by its path on access.cdn</p>
<p>A typical YAML format for Product, version and file looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YAML file formats for Product</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">product</span>                                             <span class="c1"># MANDATORY</span>
  <span class="n">state</span><span class="p">:</span> <span class="n">create</span>                                             <span class="c1"># MANDATORY</span>
  <span class="n">metadata</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Test Product&quot;</span>                                    <span class="c1"># MANDATORY</span>
    <span class="n">productCode</span><span class="p">:</span> <span class="s2">&quot;TestProduct&quot;</span>                              <span class="c1"># MANDATORY</span>
    <span class="n">homepage</span><span class="p">:</span> <span class="s2">&quot;https://test.com/&quot;</span>                           <span class="c1"># OPTIONAL</span>
    <span class="n">downloadpage</span><span class="p">:</span> <span class="s2">&quot;https://test.com/&quot;</span>                       <span class="c1"># OPTIONAL</span>
    <span class="n">thankYouPage</span><span class="p">:</span> <span class="s2">&quot;https://test.com/&quot;</span>                       <span class="c1"># OPTIONAL</span>
    <span class="n">eloquaCode</span><span class="p">:</span> <span class="s2">&quot;NOT_SET&quot;</span>                                   <span class="c1"># OPTIONAL</span>
    <span class="n">featuredArtifactType</span><span class="p">:</span> <span class="s2">&quot;Server&quot;</span>                          <span class="c1"># OPTIONAL</span>
    <span class="n">thankYouTimeout</span><span class="p">:</span> <span class="mi">5</span>                                      <span class="c1"># OPTIONAL</span>

<span class="c1"># YAML file formats for Version</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">product_version</span>                                     <span class="c1"># MANDATORY</span>
  <span class="n">state</span><span class="p">:</span> <span class="n">create</span>                                             <span class="c1"># MANDATORY</span>
  <span class="n">metadata</span><span class="p">:</span>
    <span class="n">productName</span><span class="p">:</span> <span class="s2">&quot;Test Product&quot;</span>                             <span class="c1"># MANDATORY</span>
    <span class="n">productCode</span><span class="p">:</span> <span class="s2">&quot;TestProduct&quot;</span>                              <span class="c1"># MANDATORY</span>
    <span class="n">versionName</span><span class="p">:</span> <span class="s2">&quot;TestProductVersion&quot;</span>                       <span class="c1"># MANDATORY</span>
    <span class="n">ga</span><span class="p">:</span> <span class="n">true</span>                                                <span class="c1"># OPTIONAL</span>
    <span class="n">masterProductVersion</span><span class="p">:</span> <span class="n">null</span>                              <span class="c1"># OPTIONAL</span>
    <span class="n">termsAndConditions</span><span class="p">:</span> <span class="s2">&quot;Anonymous Download&quot;</span>                <span class="c1"># MANDATORY</span>
    <span class="n">trackingDisabled</span><span class="p">:</span> <span class="n">true</span>                                  <span class="c1"># OPTIONAL</span>
    <span class="n">hidden</span><span class="p">:</span> <span class="n">true</span>                                            <span class="c1"># OPTIONAL</span>
    <span class="n">invisible</span><span class="p">:</span> <span class="n">true</span>                                         <span class="c1"># OPTIONAL</span>

<span class="c1"># YAML file formats for File</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">file</span>                                                <span class="c1"># MANDATORY</span>
  <span class="n">state</span><span class="p">:</span> <span class="n">create</span>                                             <span class="c1"># MANDATORY</span>
  <span class="n">metadata</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;FILE&quot;</span>                                            <span class="c1"># MANDATORY</span>
    <span class="n">productName</span><span class="p">:</span> <span class="s2">&quot;Test Product&quot;</span>                             <span class="c1"># MANDATORY</span>
    <span class="n">productCode</span><span class="p">:</span> <span class="s2">&quot;TestProduct&quot;</span>                              <span class="c1"># MANDATORY</span>
    <span class="n">productVersionName</span><span class="p">:</span> <span class="s2">&quot;TestProductVersion&quot;</span>                <span class="c1"># MANDATORY</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Test description&quot;</span>                         <span class="c1"># MANDATORY</span>
    <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Release Info&quot;</span>                                   <span class="c1"># MANDATORY</span>
    <span class="n">order</span><span class="p">:</span> <span class="mi">0</span>                                                <span class="c1"># OPTIONAL</span>
    <span class="n">hidden</span><span class="p">:</span> <span class="n">false</span>                                           <span class="c1"># OPTIONAL</span>
    <span class="n">downloadURL</span><span class="p">:</span> <span class="s2">&quot;/content/origin/files/TestProduct/&quot;</span>       <span class="c1"># MANDATORY</span>
    <span class="n">shortURL</span><span class="p">:</span> <span class="s2">&quot;/test-1/example-v4/testing/&quot;</span>                 <span class="c1"># MANDATORY</span>
    <span class="n">differentProductThankYouPage</span><span class="p">:</span> <span class="s2">&quot;Any Thank You Page&quot;</span>      <span class="c1"># OPTIONAL</span>

<span class="o">...</span> <span class="c1"># other records</span>
</pre></div>
</div>
<p>To know more content gateway operations about add, update and delete please visit <a class="reference internal" href="push_base.html"><span class="doc">Push Base Module</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="push-staged-cgw">
<h2>push-staged-cgw<a class="headerlink" href="#push-staged-cgw" title="Permalink to this heading"></a></h2>
<p>The push-staged-cgw (<a class="reference internal" href="push_staged_cgw.html"><span class="doc">Push Staged CGW Module</span></a>) is a target entrypoint for Push Staged which will be invoked through Red Hat’s internal service called <cite>rcm-pub</cite>.</p>
<p>All the user credentials will be received through the argument <code class="docutils literal notranslate"><span class="pre">target_settings</span></code> consisting of <cite>server_name</cite>, <cite>username</cite> and <cite>password</cite>.
It shares the same YAML file structure except <cite>downloadURL</cite> user need to pass <cite>pushItemPath</cite>.</p>
<div class="section" id="yaml-file-formats">
<h3>YAML file formats<a class="headerlink" href="#yaml-file-formats" title="Permalink to this heading"></a></h3>
<p>The user can pass a single or multiple records of product, version and file in a single YAML file.
A typical YAML format for Product, version and file looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># YAML file formats for File</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">file</span>                                                <span class="c1"># MANDATORY</span>
  <span class="n">state</span><span class="p">:</span> <span class="n">create</span>                                             <span class="c1"># MANDATORY</span>
  <span class="n">metadata</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;FILE&quot;</span>                                            <span class="c1"># MANDATORY</span>
    <span class="n">productName</span><span class="p">:</span> <span class="s2">&quot;Test Product&quot;</span>                             <span class="c1"># MANDATORY</span>
    <span class="n">productCode</span><span class="p">:</span> <span class="s2">&quot;TestProduct&quot;</span>                              <span class="c1"># MANDATORY</span>
    <span class="n">productVersionName</span><span class="p">:</span> <span class="s2">&quot;TestProductVersion&quot;</span>                <span class="c1"># MANDATORY</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Test description&quot;</span>                         <span class="c1"># MANDATORY</span>
    <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Release Info&quot;</span>                                   <span class="c1"># MANDATORY</span>
    <span class="n">order</span><span class="p">:</span> <span class="mi">0</span>                                                <span class="c1"># OPTIONAL</span>
    <span class="n">hidden</span><span class="p">:</span> <span class="n">false</span>                                           <span class="c1"># OPTIONAL</span>
    <span class="n">pushItemPath</span><span class="p">:</span> <span class="s2">&quot;/content/origin/files/TestProduct/&quot;</span>      <span class="c1"># MANDATORY</span>
    <span class="n">shortURL</span><span class="p">:</span> <span class="s2">&quot;/test-1/example-v4/testing/&quot;</span>                 <span class="c1"># MANDATORY</span>
    <span class="n">differentProductThankYouPage</span><span class="p">:</span> <span class="s2">&quot;Any Thank You Page&quot;</span>      <span class="c1"># OPTIONAL</span>

<span class="o">...</span> <span class="c1"># other records</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="push_base.html" class="btn btn-neutral float-right" title="Push Base Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Red Hat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>